<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Movement Lab v1.0</title>
<style>
    body { background: #111; color: #00E676; font-family: monospace; margin: 0; overflow: hidden; touch-action: none; }
    canvas { display: block; }
    #controls { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); padding: 15px; border: 1px solid #00E676; pointer-events: none; }
    .label { font-size: 12px; color: #fff; margin-bottom: 5px; }
</style>
</head>
<body>
<div id="controls">
    <div style="font-weight:bold; margin-bottom:10px;">MOVEMENT VISUALIZER</div>
    <div class="label">Green Dot: Target</div>
    <div class="label">White Line: Path History</div>
    <div class="label">Blue Circle: Center Gravity</div>
</div>
<canvas id="labCanvas"></canvas>

<script>
const canvas = document.getElementById("labCanvas");
const ctx = canvas.getContext("2d");

let width, height;
let target = { x: 0, y: 0, vx: 0, vy: 0 };
let trail = [];
let time = 0;

function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
    target.x = width / 2;
    target.y = height / 2;
}

window.addEventListener("resize", resize);
resize();

function update() {
    time += 0.01;

    // 1. ORGANIC FORCE (Simulated Perlin/Noise via Sine interference)
    // We use odd primes to ensure the "drifting" force feels non-repeating
    let forceX = Math.sin(time * 1.7) * 0.5 + Math.sin(time * 3.1) * 0.3;
    let forceY = Math.cos(time * 1.9) * 0.5 + Math.cos(time * 2.7) * 0.3;

    // 2. RUBBER BAND (Gravity toward center)
    // The further it drifts, the harder the "center" pulls it back
    let dx = (width / 2) - target.x;
    let dy = (height / 2) - target.y;
    let pullStrength = 0.005; 

    target.vx += forceX + (dx * pullStrength);
    target.vy += forceY + (dy * pullStrength);

    // 3. FRICTION (Prevents infinite acceleration)
    target.vx *= 0.96;
    target.vy *= 0.96;

    target.x += target.vx;
    target.y += target.vy;

    // Store trail
    trail.push({x: target.x, y: target.y});
    if (trail.length > 120) trail.shift(); // Keep ~2 seconds of history
}

function draw() {
    // Clear with slight trail effect
    ctx.fillStyle = "rgba(17, 17, 17, 1)";
    ctx.fillRect(0, 0, width, height);

    // Draw Center Anchor (Visual Aid)
    ctx.strokeStyle = "rgba(0, 150, 255, 0.2)";
    ctx.beginPath();
    ctx.arc(width/2, height/2, 50, 0, Math.PI*2);
    ctx.stroke();

    // Draw Trail
    if (trail.length > 1) {
        ctx.strokeStyle = "rgba(255, 255, 255, 0.4)";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(trail[0].x, trail[0].y);
        for (let i = 1; i < trail.length; i++) {
            ctx.lineTo(trail[i].x, trail[i].y);
        }
        ctx.stroke();
    }

    // Draw Target
    ctx.fillStyle = "#00E676";
    ctx.shadowBlur = 15;
    ctx.shadowColor = "#00E676";
    ctx.beginPath();
    ctx.arc(target.x, target.y, 10, 0, Math.PI*2);
    ctx.fill();
    ctx.shadowBlur = 0;
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>